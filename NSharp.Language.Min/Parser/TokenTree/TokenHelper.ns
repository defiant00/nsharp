use NSharp.Core
use NSharp.Core.SyntaxTree

ns NSharp.Language.Min.TokenTree

public static class TokenHelper
    public static ext{TokenType} fn IsAssignment() bool is this > TokenType.Assignment_Start and this < TokenType.Assignment_End
    public static ext{TokenType} fn IsOperatorCanThrow() bool is this > TokenType.Operator_Can_Throw_Start and this < TokenType.Operator_Can_Throw_End
    public static ext{TokenType} fn IsLineContinuationPostfix() bool is this > TokenType.Line_Continuation_Postfix_Start and this < TokenType.Line_Continuation_Postfix_End
    public static ext{TokenType} fn IsLineContinuationPrefix() bool is this > TokenType.Line_Continuation_Prefix_Start and this < TokenType.Line_Continuation_Prefix_End
    public static ext{TokenType} fn IsArgumentModifier() bool is this > TokenType.Argument_Modifier_Start and this < TokenType.Argument_Modifier_End
    public static ext{TokenType} fn IsParameterModifier() bool is this > TokenType.Parameter_Modifier_Start and this < TokenType.Parameter_Modifier_End
    public static ext{TokenType} fn IsModifier() bool is this > TokenType.Modifier_Start and this < TokenType.Modifier_End
    public static ext{TokenType} fn IsType() bool is this > TokenType.Type_Start and this < TokenType.Type_End
    public static ext{TokenType} fn IsBlock() bool is this > TokenType.Block_Start and this < TokenType.Block_End
    public static ext{TokenType} fn IsGroup() bool is this > TokenType.Group_Start and this < TokenType.Group_End
    public static ext{TokenType} fn NeedsDedent() bool is this > TokenType.Token_Needs_Dedent_Start and this < TokenType.Token_Needs_Dedent_End
    public static ext{TokenType} fn IsUnaryOperator() bool is this > TokenType.Unary_Operator_Start and this < TokenType.Unary_Operator_End

    public static ext{TokenType} fn ToModifier() ModifierType is this ?
        {
            TokenType.Public is ModifierType.Public,
            TokenType.Protected is ModifierType.Protected,
            TokenType.Internal is ModifierType.Internal,
            TokenType.Private is ModifierType.Private,
            TokenType.Extension is ModifierType.Extension,
            TokenType.Abstract is ModifierType.Abstract,
            TokenType.Open is ModifierType.Open,
            TokenType.Override is ModifierType.Override,
            TokenType.Static is ModifierType.Static,
            _ is throw new Exception(Resources.FormatFatal(0x0000, this)),
        }

    public static ext{TokenType} fn ToArgumentModifier() ArgumentModifierType is this ?
        {
            TokenType.Out is ArgumentModifierType.Out,
            TokenType.Reference is ArgumentModifierType.Reference,
            _ is throw new Exception(Resources.FormatFatal(0x0001, this)),
        }
    
    public static ext{TokenType} fn ToParameterModifier() ParameterModifierType is this ?
        {
            TokenType.Out is ParameterModifierType.Out,
            TokenType.Reference is ParameterModifierType.Reference,
            TokenType.Variable is ParameterModifierType.Parameters,
            _ is throw new Exception(Resources.FormatFatal(0x0002, this)),
        }

    public static ext{TokenType} fn ToUnaryOperator() UnaryOperatorType is this ?
        {
            TokenType.Subtract is UnaryOperatorType.Negate,
            TokenType.Not is UnaryOperatorType.Not,
            TokenType.BitwiseNot is UnaryOperatorType.BitwiseNot,
            _ is throw new Exception(Resources.FormatFatal(0x0003, this)),
        }

    public static ext{TokenType} fn ToBinaryOperator() BinaryOperatorType is this ?
        {
            TokenType.Dot is BinaryOperatorType.Dot,
            TokenType.NullDot is BinaryOperatorType.NullDot,

            TokenType.Is is BinaryOperatorType.Is,
            TokenType.As is BinaryOperatorType.As,

            TokenType.Multiply is BinaryOperatorType.Multiply,
            TokenType.Divide is BinaryOperatorType.Divide,
            TokenType.Modulus is BinaryOperatorType.Modulus,

            TokenType.Add is BinaryOperatorType.Add,
            TokenType.Subtract is BinaryOperatorType.Subtract,

            TokenType.LeftShift is BinaryOperatorType.LeftShift,
            TokenType.RightShift is BinaryOperatorType.RightShift,

            TokenType.BitwiseAnd is BinaryOperatorType.BitwiseAnd,

            TokenType.BitwiseOr is BinaryOperatorType.BitwiseOr,
            TokenType.BitwiseXor is BinaryOperatorType.BitwiseXor,

            TokenType.LessThan is BinaryOperatorType.LessThan,
            TokenType.GreaterThan is BinaryOperatorType.GreaterThan,
            TokenType.LessThanOrEqual is BinaryOperatorType.LessThanOrEqual,
            TokenType.GreaterThanOrEqual is BinaryOperatorType.GreaterThanOrEqual,

            TokenType.Equal is BinaryOperatorType.Equal,
            TokenType.NotEqual is BinaryOperatorType.NotEqual,

            TokenType.And is BinaryOperatorType.And,

            TokenType.Or is BinaryOperatorType.Or,

            TokenType.NullCoalesce is BinaryOperatorType.NullCoalesce,

            _ is BinaryOperatorType.None,
        }

    public static ext{TokenType} fn ToAssignmentOperator() AssignmentOperatorType is this ?
        {
            TokenType.Assign is AssignmentOperatorType.Assign,
            TokenType.AddAssign is AssignmentOperatorType.Add,
            TokenType.SubtractAssign is AssignmentOperatorType.Subtract,
            TokenType.MultiplyAssign is AssignmentOperatorType.Multiply,
            TokenType.DivideAssign is AssignmentOperatorType.Divide,
            TokenType.ModulusAssign is AssignmentOperatorType.Modulus,
            TokenType.BitwiseAndAssign is AssignmentOperatorType.BitwiseAnd,
            TokenType.BitwiseOrAssign is AssignmentOperatorType.BitwiseOr,
            TokenType.BitwiseXorAssign is AssignmentOperatorType.BitwiseXor,
            TokenType.LeftShiftAssign is AssignmentOperatorType.LeftShift,
            TokenType.RightShiftAssign is AssignmentOperatorType.RightShift,
            TokenType.NullCoalesceAssign is AssignmentOperatorType.NullCoalesce,
            _ is throw new Exception(Resources.FormatFatal(0x0004, this)),
        }

    public static var KeywordTokens Dictionary{str, TokenType}

    static fn new()
        KeywordTokens = new()
        KeywordTokens.Add("ns", TokenType.Namespace)
        KeywordTokens.Add("use", TokenType.Use)
        KeywordTokens.Add("if", TokenType.If)
        KeywordTokens.Add("else", TokenType.Else)
        KeywordTokens.Add("_", TokenType.Discard)
        KeywordTokens.Add("public", TokenType.Public)
        KeywordTokens.Add("protected", TokenType.Protected)
        KeywordTokens.Add("internal", TokenType.Internal)
        KeywordTokens.Add("private", TokenType.Private)
        KeywordTokens.Add("abstract", TokenType.Abstract)
        KeywordTokens.Add("ext", TokenType.Extension)
        KeywordTokens.Add("open", TokenType.Open)
        KeywordTokens.Add("over", TokenType.Override)
        KeywordTokens.Add("static", TokenType.Static)
        KeywordTokens.Add("out", TokenType.Out)
        KeywordTokens.Add("ref", TokenType.Reference)
        KeywordTokens.Add("this", TokenType.This)
        KeywordTokens.Add("str", TokenType.String)
        KeywordTokens.Add("char", TokenType.Character)
        KeywordTokens.Add("bool", TokenType.Boolean)
        KeywordTokens.Add("i8", TokenType.I8)
        KeywordTokens.Add("i16", TokenType.I16)
        KeywordTokens.Add("short", TokenType.I16)
        KeywordTokens.Add("i32", TokenType.I32)
        KeywordTokens.Add("int", TokenType.I32)
        KeywordTokens.Add("i64", TokenType.I64)
        KeywordTokens.Add("long", TokenType.I64)
        KeywordTokens.Add("u8", TokenType.U8)
        KeywordTokens.Add("byte", TokenType.U8)
        KeywordTokens.Add("u16", TokenType.U16)
        KeywordTokens.Add("ushort", TokenType.U16)
        KeywordTokens.Add("u32", TokenType.U32)
        KeywordTokens.Add("uint", TokenType.U32)
        KeywordTokens.Add("u64", TokenType.U64)
        KeywordTokens.Add("ulong", TokenType.U64)
        KeywordTokens.Add("f32", TokenType.F32)
        KeywordTokens.Add("float", TokenType.F32)
        KeywordTokens.Add("f64", TokenType.F64)
        KeywordTokens.Add("double", TokenType.F64)
        KeywordTokens.Add("decimal", TokenType.Decimal)
        KeywordTokens.Add("class", TokenType.Class)
        KeywordTokens.Add("struct", TokenType.Struct)
        KeywordTokens.Add("enum", TokenType.Enum)
        KeywordTokens.Add("interface", TokenType.Interface)
        KeywordTokens.Add("fn", TokenType.Function)
        KeywordTokens.Add("del", TokenType.Delegate)
        KeywordTokens.Add("var", TokenType.Variable)
        KeywordTokens.Add("val", TokenType.Value)
        KeywordTokens.Add("get", TokenType.Get)
        KeywordTokens.Add("set", TokenType.Set)
        KeywordTokens.Add("is", TokenType.Is)
        KeywordTokens.Add("as", TokenType.As)
        KeywordTokens.Add("has", TokenType.Has)
        KeywordTokens.Add("new", TokenType.New)
        KeywordTokens.Add("base", TokenType.Base)
        KeywordTokens.Add("ret", TokenType.Return)
        KeywordTokens.Add("try", TokenType.Try)
        KeywordTokens.Add("catch", TokenType.Catch)
        KeywordTokens.Add("finally", TokenType.Finally)
        KeywordTokens.Add("throw", TokenType.Throw)
        KeywordTokens.Add("for", TokenType.For)
        KeywordTokens.Add("in", TokenType.In)
        KeywordTokens.Add("break", TokenType.Break)
        KeywordTokens.Add("continue", TokenType.Continue)
        KeywordTokens.Add("true", TokenType.True)
        KeywordTokens.Add("false", TokenType.False)
        KeywordTokens.Add("null", TokenType.Null)
        KeywordTokens.Add("default", TokenType.Default)
        KeywordTokens.Add("and", TokenType.And)
        KeywordTokens.Add("or", TokenType.Or)
